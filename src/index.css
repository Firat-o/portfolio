@import "tailwindcss";

/* --- keyframes --- */

@keyframes pulse-glow {
  0%, 100% { text-shadow: 0 0 14px hsl(var(--primary) / 0.7); }
  50% { text-shadow: 0 0 26px hsl(var(--primary) / 0.95); }
}

@keyframes glitch-rgb {
  0% { text-shadow: -2px 0 rgba(255,0,0,0.7), 2px 0 rgba(0,255,255,0.7); transform: translate(0,0); }
  20% { text-shadow: 2px 0 rgba(255,0,0,0.7), -2px 0 rgba(0,255,255,0.7); transform: translate(-2px, 1px); }
  40% { text-shadow: -2px 0 rgba(255,0,0,0.7), 2px 0 rgba(0,255,255,0.7); transform: translate(2px, -1px); }
  60% { text-shadow: 1px 0 rgba(255,0,0,0.7), -1px 0 rgba(0,255,255,0.7); transform: translate(-1px, 2px); }
  80% { text-shadow: -1px 0 rgba(255,0,0,0.7), 1px 0 rgba(0,255,255,0.7); transform: translate(1px, -2px); }
  100% { text-shadow: -2px 0 rgba(255,0,0,0.7), 2px 0 rgba(0,255,255,0.7); transform: translate(0,0); }
}

@keyframes typing { from { width: 0 } to { width: 100% } }
@keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: hsl(var(--primary)) } }

/* --- theme config --- */

@theme {
  --color-border: hsl(var(--border));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-card: hsl(var(--card));

  --animate-float: float 8s ease-in-out infinite;
  --animate-pulse-subtle: pulse-subtle 4s ease-in-out infinite;
  --animate-fade-in: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
  --animate-meteor: meteor 4s linear infinite;
  --animate-rotate-border: rotate-border 4s linear infinite;
  --animate-pulse-glow: pulse-glow 3s ease-in-out infinite;
  --animate-glitch: glitch-rgb 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;

  @keyframes float { 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-10px) rotate(3deg)} }
  @keyframes pulse-subtle { 0%,100%{opacity:1} 50%{opacity:.85} }
  @keyframes fade-in-scanner { from{opacity:0;clip-path:inset(0 100% 0 0)} to{opacity:1;clip-path:inset(0 0 0 0)} }
  @keyframes meteor { 0%{transform:rotate(215deg) translateX(0);opacity:1} 70%{opacity:1} 100%{transform:rotate(215deg) translateX(-500px);opacity:0} }
  @keyframes rotate-border { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
}

/* --- base setup --- */

@layer base {
  :root {
    --background: 210 40% 98%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --primary: 190 95% 50%;
    --primary-foreground: 210 50% 10%;
    --border: 214 32% 91%;
    --grain-opacity: .28;
    --grain-blend: soft-light;
  }

  .dark {
    --background: 215 30% 6%;
    --foreground: 195 100% 95%;
    --card: 215 25% 12% / 0.72;
    --primary: 190 95% 55%;
    --primary-foreground: 210 50% 10%;
    --border: 200 20% 23%;
    --grain-opacity: .5;
    --grain-blend: overlay;
  }

  * { @apply border-border; }
  html { @apply scroll-smooth; }

  body {
    @apply bg-background text-foreground transition-colors duration-300;
    font-family: 'Bahnschrift','Segoe UI','Roboto Mono',system-ui,sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
    position: relative;
    min-height: 100dvh;
    background-image:
      radial-gradient(1200px 600px at 20% -10%, hsl(var(--primary) / 0.12) 0%, transparent 60%),
      radial-gradient(1200px 600px at 80% 110%, hsl(var(--primary) / 0.08) 0%, transparent 60%),
      radial-gradient(900px 600px at 50% -20%, hsl(var(--foreground) / 0.04) 0%, transparent 70%);
    background-attachment: fixed;
    isolation: isolate;
    overflow-x: hidden;
  }

  /* scanlines overlay */
  body::after {
    content:""; position: fixed; inset: 0; pointer-events: none; z-index: 50;
    background: repeating-linear-gradient(0deg, transparent 0px, transparent 2px, rgba(0,0,0,0.1) 3px, rgba(0,0,0,0.1) 4px);
    background-size: 100% 4px; opacity: 0.2; mix-blend-mode: overlay;
  }

  /* grain noise */
  body::before {
    content:""; position: fixed; inset: 0; pointer-events: none; z-index: 0;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='1.4' numOctaves='3' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/></filter><rect width='100%' height='100%' filter='url(%23n)'/></svg>");
    mix-blend-mode: var(--grain-blend); opacity: var(--grain-opacity);
  }

  #root { position: relative; z-index: 2; max-width: 100%; margin: 0 auto; text-align: center; }
  h1 { text-shadow: 0 1px 0 hsl(var(--foreground) / 0.28); }
}

/* --- utilities --- */

@utility container {
  margin-inline: auto; padding-inline: 2rem;
  @media (width >= 640px) { max-width: 640px; }
  @media (width >= 768px) { max-width: 768px; }
  @media (width >= 1024px) { max-width: 1024px; }
  @media (width >= 1280px) { max-width: 1280px; }
}

@utility text-glow { @apply relative; animation: var(--animate-pulse-glow); }

/* name glitch fx */
@utility glitch-hover {
  @apply relative inline-block transition-colors duration-200;
  &:hover {
    animation: glitch-rgb 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
    color: hsl(var(--primary));
  }
}

/* hollow 0 style */
@utility hollow-text {
  -webkit-text-stroke: 2px hsl(var(--primary));
  color: transparent; transition: all 0.4s ease;
  &:hover {
    color: hsl(var(--primary) / 0.15);
    text-shadow: 0 0 20px hsl(var(--primary) / 0.6);
    -webkit-text-stroke: 2px hsl(var(--primary) / 0.8);
  }
}

/* typewriter fx */
@utility typing-effect {
  overflow: hidden; white-space: nowrap; border-right: 2px solid hsl(var(--primary)); width: 0;
  animation: typing 3s steps(30, end) forwards, blink-caret .75s step-end infinite;
  animation-delay: 0.5s; animation-fill-mode: forwards;
}

/* hud button */
@utility cosmic-button {
  @apply px-8 py-3 bg-primary/10 border border-primary/50 text-primary font-bold tracking-wider uppercase transition-all duration-300;
  clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%);
  backdrop-filter: blur(4px);
  &:hover {
    @apply bg-primary text-primary-foreground scale-105;
    box-shadow: 0 0 20px hsl(var(--primary) / 0.6);
    text-shadow: none; animation: glitch-rgb 0.4s linear infinite;
  }
  &:active { @apply scale-95; }
}

/* hud card brackets */
@utility tech-card {
  @apply relative bg-card/40 backdrop-blur-md border border-white/5 p-6 transition-all duration-300;
  &::before, &::after {
    content: ""; @apply absolute w-3 h-3 transition-all duration-500;
    border: 1px solid hsl(var(--primary)); opacity: 0.5;
  }
  &::before { top: -1px; left: -1px; border-right: 0; border-bottom: 0; }
  &::after { bottom: -1px; right: -1px; border-left: 0; border-top: 0; }
  &:hover { transform: translateY(-5px); box-shadow: 0 10px 30px -10px hsl(var(--primary) / 0.2); }
  &:hover::before, &:hover::after { @apply w-6 h-6 opacity-100; border-width: 2px; }
}

/* bg items */
@utility star { @apply absolute rounded-full bg-primary; box-shadow: 0 0 12px 2px hsl(var(--primary) / 0.6); }
@utility meteor {
  @apply absolute bg-gradient-to-r from-primary via-primary to-transparent rounded-full;
  box-shadow: 0 0 14px 4px hsl(var(--primary) / 0.4);
}

:where(a,button,input,select,textarea):focus-visible {
  outline: 2px solid hsl(var(--primary)); outline-offset: 4px;
}
