@import "tailwindcss";

/* --- KEYFRAMES --- */

@keyframes pulse-glow {
  0%, 100% { text-shadow: 0 0 14px hsl(var(--primary) / 0.5); }
  50% { text-shadow: 0 0 22px hsl(var(--primary) / 0.8); }
}

@keyframes glitch-rgb {
  0% { text-shadow: -1px 0 rgba(0,255,150,0.5), 1px 0 rgba(0,255,0,0.5); transform: translate(0,0); }
  20% { text-shadow: 1px 0 rgba(0,255,150,0.5), -1px 0 rgba(0,255,0,0.5); transform: translate(-1px, 1px); }
  40% { text-shadow: -1px 0 rgba(0,255,150,0.5), 1px 0 rgba(0,255,0,0.5); transform: translate(1px, -1px); }
  100% { text-shadow: -1px 0 rgba(0,255,150,0.5), 1px 0 rgba(0,255,0,0.5); transform: translate(0,0); }
}

@keyframes float { 
  0%, 100% { transform: translateY(0); } 
  50% { transform: translateY(-10px); } 
}

@keyframes meteor { 
  0% { transform: rotate(215deg) translateX(0); opacity: 0; } 
  10% { opacity: 1; } 
  70% { opacity: 1; } 
  100% { transform: rotate(215deg) translateX(-600px); opacity: 0; } 
}

@keyframes rotate-border { 
  0% { transform: rotate(0); } 
  100% { transform: rotate(360deg); } 
}

@keyframes typing { 
  from { width: 0; } 
  to { width: 100%; } 
}

@keyframes blink-caret { 
  from, to { border-color: transparent; } 
  50% { border-color: hsl(var(--primary)); } 
}

@keyframes fade-in-scanner { 
  from { opacity: 0; clip-path: inset(0 100% 0 0); } 
  to { opacity: 1; clip-path: inset(0 0 0 0); } 
}

/* --- THEME CONFIGURATION --- */

@theme {
  --color-border: hsl(var(--border));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-card: hsl(var(--card));

  --animate-float: float 6s ease-in-out infinite;
  --animate-meteor: meteor 6s linear infinite;
  --animate-rotate-border: rotate-border 4s linear infinite;
  --animate-pulse-glow: pulse-glow 3s ease-in-out infinite;
  --animate-glitch: glitch-rgb 0.3s ease-in-out both infinite;
  --animate-fade-in: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
  
  --animate-fade-in-delay-1: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.2s forwards;
  --animate-fade-in-delay-2: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.4s forwards;
  --animate-fade-in-delay-3: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.6s forwards;
  --animate-fade-in-delay-4: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.8s forwards;
}

/* --- BASE STYLES --- */

@layer base {
  :root {
    /* LIGHT MODE: Optimiert für Lesbarkeit */
    /* Kein hartes Weiß, sondern ein technisches Soft-Grey */
    --background: 210 20% 96%; 
    
    /* Sehr dunkles Grau-Blau für maximalen Text-Kontrast */
    --foreground: 222 47% 10%; 
    
    /* Kartenhintergrund: Solides Weiß (deckend) */
    --card: 0 0% 100% / 1.0; 
    
    /* Ein dunkleres, satteres Smaragd-Grün für helle Hintergründe */
    --primary: 180 100% 25%; 
    --primary-foreground: 210 40% 98%;
    
    --border: 214 20% 80%;
    --grain-opacity: .05;
    --grain-blend: multiply;
    --star-color: 215 20% 50%;
  }

  .dark {
    /* DARK MODE: Hacker Style */
    --background: 160 50% 2%; 
    --foreground: 158 100% 94%;
    --card: 160 50% 4% / 0.7;
    
    /* Leuchtendes Neon-Mint */
    --primary: 158 85% 55%; 
    --primary-foreground: 160 50% 2%;
    
    --border: 158 50% 12%;
    --grain-opacity: .35;
    --grain-blend: overlay;
    --star-color: 158 85% 55%;
  }

  * { 
    cursor: none !important; 
    @apply border-border; 
  }

  html { 
    @apply scroll-smooth; 
  }

  body {
    @apply bg-background text-foreground transition-colors duration-500 overflow-x-hidden;
    font-family: 'Bahnschrift', 'Segoe UI', 'Roboto', sans-serif;
    position: relative;
    min-height: 100dvh;
    
    /* Raster-Hintergrund */
    background-image: 
      radial-gradient(circle at 2px 2px, hsl(var(--primary) / 0.05) 1px, transparent 0);
    background-size: 32px 32px;
    background-attachment: fixed;
    isolation: isolate;
  }

  .dark body {
    /* Zusätzlicher Glow im Dark Mode */
    background-image: 
      radial-gradient(circle at 2px 2px, hsl(var(--primary) / 0.1) 1px, transparent 0),
      radial-gradient(1200px 600px at 15% -10%, hsl(var(--primary) / 0.15) 0%, transparent 60%),
      radial-gradient(1200px 600px at 85% 110%, hsl(var(--primary) / 0.12) 0%, transparent 60%);
  }

  /* Scanlines */
  body::after {
    content: ""; 
    position: fixed; 
    inset: 0; 
    pointer-events: none; 
    z-index: 50;
    background: repeating-linear-gradient(0deg, transparent 0px, transparent 1px, rgba(0,255,150,0.02) 2px, rgba(0,255,150,0.02) 3px);
    background-size: 100% 4px; 
    opacity: 0.1; 
    mix-blend-mode: overlay;
  }

  .dark body::after {
    opacity: 0.25; 
  }

  body::before {
    content: ""; 
    position: fixed; 
    inset: 0; 
    pointer-events: none; 
    z-index: 0;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.5'/></svg>");
    mix-blend-mode: var(--grain-blend); 
    opacity: var(--grain-opacity);
  }

  .gradient-border {
    @apply relative p-[1px] overflow-hidden;
    clip-path: polygon(0 10px, 10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
  }
  
  .gradient-border > * { 
    @apply relative z-10 h-full w-full; 
    background: hsl(var(--card)); 
    backdrop-filter: blur(8px); 
  }
}

/* --- UTILITIES --- */

@utility container {
  margin-inline: auto; padding-inline: 1.5rem;
  @media (width >= 1280px) { max-width: 1280px; }
}

@utility text-glow { 
  @apply relative; 
  animation: var(--animate-pulse-glow); 
}

@utility glitch-hover {
  @apply relative inline-block transition-all duration-300;
  &:hover {
    animation: glitch-rgb 0.4s ease-in-out infinite;
    color: hsl(var(--primary));
  }
}

@utility hollow-text {
  /* LIGHT MODE: Dickere Kontur (2px) für Lesbarkeit auf hellem Grund */
  -webkit-text-stroke: 2px hsl(var(--primary));
  color: transparent; 
  transition: all 0.4s ease;
  
  /* DARK MODE: Feinere Kontur (1.5px) da Kontrast höher ist */
  .dark & { -webkit-text-stroke: 1.5px hsl(var(--primary)); }
  
  &:hover {
    color: hsl(var(--primary) / 0.15);
    text-shadow: 0 0 15px hsl(var(--primary) / 0.4);
  }
}

@utility typing-effect {
  overflow: hidden; 
  white-space: nowrap; 
  border-right: 3px solid hsl(var(--primary)); 
  width: 0;
  animation: typing 2.5s steps(35, end) forwards, blink-caret .8s step-end infinite;
  animation-delay: 0.6s;
}

@utility cosmic-button {
  @apply px-10 py-4 bg-primary text-primary-foreground font-black tracking-[0.2em] uppercase transition-all duration-300 hover:brightness-110 active:scale-95 relative overflow-hidden;
  clip-path: polygon(0 15px, 15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%);
  &:hover { box-shadow: 0 0 25px hsl(var(--primary) / 0.4); transform: translateY(-2px); }
}

@utility extra-button {
  @apply relative inline-block px-8 py-3 font-bold text-primary transition-all duration-300 border-2 border-primary/30 rounded-sm hover:bg-primary/5 active:scale-95 uppercase tracking-widest;
}

@utility tech-card {
  @apply relative bg-card backdrop-blur-3xl border border-border p-8 transition-all duration-500 shadow-xl;
  
  /* Eck-Klammern Design */
  clip-path: polygon(0 20px, 20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
  
  &::before, &::after {
    content: ""; 
    @apply absolute w-4 h-4 transition-all duration-500 border-primary opacity-30;
  }
  &::before { top: 10px; left: 10px; border-left: 2px solid; border-top: 2px solid; }
  &::after { bottom: 10px; right: 10px; border-right: 2px solid; border-bottom: 2px solid; }
  
  &:hover { 
    @apply -translate-y-2 shadow-2xl border-primary/60; 
  }
  &:hover::before, &:hover::after { 
    @apply w-8 h-8 opacity-100; 
  }
}

@utility star { 
  @apply absolute rounded-full;
  background-color: hsl(var(--star-color));
  box-shadow: 0 0 8px hsl(var(--star-color) / 0.4);
}

@utility meteor {
  @apply absolute bg-gradient-to-r from-primary via-primary/50 to-transparent rounded-full;
  opacity: 0.2;
  .dark & { opacity: 0.6; box-shadow: 0 0 15px hsl(var(--primary) / 0.5); }
}

:where(a,button,input,textarea):focus-visible {
  outline: 2px solid hsl(var(--primary)); 
  outline-offset: 4px;
}
