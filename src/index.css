@import "tailwindcss";

@keyframes pulse-glow {
  0%, 100% { text-shadow: 0 0 14px hsl(var(--primary) / 0.5); }
  50% { text-shadow: 0 0 22px hsl(var(--primary) / 0.8); }
}

@keyframes glitch-rgb {
  0% { text-shadow: -1px 0 rgba(255,0,0,0.5), 1px 0 rgba(0,255,255,0.5); transform: translate(0,0); }
  20% { text-shadow: 1px 0 rgba(255,0,0,0.5), -1px 0 rgba(0,255,255,0.5); transform: translate(-1px, 1px); }
  40% { text-shadow: -1px 0 rgba(255,0,0,0.5), 1px 0 rgba(0,255,255,0.5); transform: translate(1px, -1px); }
  100% { text-shadow: -1px 0 rgba(255,0,0,0.5), 1px 0 rgba(0,255,255,0.5); transform: translate(0,0); }
}

@keyframes shake-subtle {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(1px, 0, 0); }
}

@keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes pulse-subtle { 0%,100%{opacity:1} 50%{opacity:.7} }
@keyframes fade-in-scanner { from{opacity:0;clip-path:inset(0 100% 0 0)} to{opacity:1;clip-path:inset(0 0 0 0)} }
@keyframes meteor { 0%{transform:rotate(215deg) translateX(0);opacity:0} 10%{opacity:1} 70%{opacity:1} 100%{transform:rotate(215deg) translateX(-600px);opacity:0} }
@keyframes rotate-border { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
@keyframes typing { from { width: 0 } to { width: 100% } }
@keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: hsl(var(--primary)) } }

@theme {
  --color-border: hsl(var(--border));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-card: hsl(var(--card));

  --animate-float: float 6s ease-in-out infinite;
  --animate-pulse-subtle: pulse-subtle 4s ease-in-out infinite;
  --animate-meteor: meteor 6s linear infinite;
  --animate-rotate-border: rotate-border 4s linear infinite;
  --animate-pulse-glow: pulse-glow 3s ease-in-out infinite;
  --animate-glitch: glitch-rgb 0.3s ease-in-out both infinite;
  
  --animate-fade-in: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
  --animate-fade-in-delay-1: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.2s forwards;
  --animate-fade-in-delay-2: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.4s forwards;
  --animate-fade-in-delay-3: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.6s forwards;
  --animate-fade-in-delay-4: fade-in-scanner 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.8s forwards;
}

@layer base {
  :root {
    --background: 210 20% 98%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100% / 0.8;
    --primary: 190 90% 35%;
    --primary-foreground: 0 0% 100%;
    --border: 214 32% 85%;
    --grain-opacity: .15;
    --grain-blend: multiply;
    --star-color: 215 20% 65%;
  }

  .dark {
    --background: 222 47% 4%;
    --foreground: 190 100% 96%;
    --card: 222 47% 8% / 0.6;
    --primary: 190 95% 55%;
    --primary-foreground: 222 47% 4%;
    --border: 190 50% 15%;
    --grain-opacity: .4;
    --grain-blend: overlay;
    --star-color: 190 95% 55%;
  }

  * { @apply border-border; }
  html { @apply scroll-smooth; }

  body {
    @apply bg-background text-foreground transition-colors duration-500;
    font-family: 'Bahnschrift','Segoe UI','Roboto',system-ui,sans-serif;
    position: relative;
    min-height: 100dvh;
    background-image: 
      radial-gradient(1000px 500px at 15% -5%, hsl(var(--primary) / 0.05) 0%, transparent 70%),
      radial-gradient(1000px 500px at 85% 105%, hsl(var(--primary) / 0.05) 0%, transparent 70%);
    background-attachment: fixed;
    isolation: isolate;
  }

  .dark body {
    background-image: 
      radial-gradient(1200px 600px at 15% -10%, hsl(var(--primary) / 0.15) 0%, transparent 60%),
      radial-gradient(1200px 600px at 85% 110%, hsl(var(--primary) / 0.12) 0%, transparent 60%);
  }

  body::after {
    content:""; position: fixed; inset: 0; pointer-events: none; z-index: 50;
    background: repeating-linear-gradient(0deg, transparent 0px, transparent 1px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 3px);
    background-size: 100% 4px; opacity: 0.1; mix-blend-mode: overlay;
  }

  .dark body::after {
    opacity: 0.3;
    background: repeating-linear-gradient(0deg, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 3px, rgba(0,0,0,0.2) 4px);
  }

  body::before {
    content:""; position: fixed; inset: 0; pointer-events: none; z-index: 0;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.5'/></svg>");
    mix-blend-mode: var(--grain-blend); opacity: var(--grain-opacity);
  }

  .gradient-border {
    @apply relative p-[1px] overflow-hidden;
    clip-path: polygon(0 10px, 10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
  }
  
  .gradient-border > * { @apply relative z-10 h-full w-full; background: hsl(var(--card)); backdrop-filter: blur(8px); }
}

@utility container {
  margin-inline: auto; padding-inline: 1.5rem;
  @media (width >= 1280px) { max-width: 1200px; }
}

@utility text-glow { @apply relative; animation: var(--animate-pulse-glow); }

@utility glitch-hover {
  @apply relative inline-block transition-all duration-300;
  &:hover {
    animation: glitch-rgb 0.4s ease-in-out infinite;
    color: hsl(var(--primary));
  }
}

@utility hollow-text {
  -webkit-text-stroke: 1.5px hsl(var(--primary));
  color: transparent; transition: all 0.4s ease;
  .dark & { -webkit-text-stroke: 2px hsl(var(--primary)); }
  &:hover {
    color: hsl(var(--primary) / 0.1);
    text-shadow: 0 0 15px hsl(var(--primary) / 0.4);
  }
}

@utility typing-effect {
  overflow: hidden; white-space: nowrap; border-right: 2px solid hsl(var(--primary)); width: 0;
  animation: typing 2.5s steps(35, end) forwards, blink-caret .8s step-end infinite;
  animation-delay: 0.6s;
}

@utility cosmic-button {
  @apply px-8 py-3 bg-primary text-primary-foreground font-bold transition-all duration-300 hover:brightness-110 active:scale-95 relative overflow-hidden;
  clip-path: polygon(0 10px, 10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
  &:hover { box-shadow: 0 0 20px hsl(var(--primary) / 0.4); }
}

@utility extra-button {
  @apply relative inline-block px-8 py-3 font-bold text-primary transition-all duration-300 border border-primary/30 rounded-sm hover:bg-primary/5 active:scale-95;
}

@utility tech-card {
  @apply relative bg-card backdrop-blur-xl border border-border p-6 transition-all duration-500 shadow-sm;
  &::before, &::after {
    content: ""; @apply absolute w-2 h-2 transition-all duration-500 border-primary opacity-30;
  }
  &::before { top: 4px; left: 4px; border-left: 1px solid; border-top: 1px solid; }
  &::after { bottom: 4px; right: 4px; border-right: 1px solid; border-bottom: 1px solid; }
  &:hover { @apply -translate-y-1 shadow-xl border-primary/30; }
  &:hover::before, &:hover::after { @apply w-4 h-4 opacity-100; }
}

@utility star { 
  @apply absolute rounded-full;
  background-color: hsl(var(--star-color));
  box-shadow: 0 0 8px hsl(var(--star-color) / 0.3);
}

@utility meteor {
  @apply absolute bg-gradient-to-r from-primary via-primary/50 to-transparent rounded-full;
  opacity: 0.15;
  .dark & { opacity: 0.5; box-shadow: 0 0 12px hsl(var(--primary) / 0.4); }
}

:where(a,button,input,textarea):focus-visible {
  outline: 2px solid hsl(var(--primary)); outline-offset: 4px;
}
